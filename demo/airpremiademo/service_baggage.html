<!DOCTYPE html>
<html lang="ko" style="overflow: hidden;">

<head>
    <meta charset="utf-8">
    <meta name="viewport"
        content="height=device-height, width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
    <title>AlphaSeat</title>
    <link rel="stylesheet" href="./resource/css/newui.css">
    <link rel="stylesheet" href="./resource/css/content.css">
    <link rel="stylesheet" href="./resource/css/reset.css">
    <link rel="stylesheet" href="./resource/css/common.css">
	<script src='./resource/js/jquery-3.4.1.min.js'></script>
    <script src='./resource/js/jquery.min.js'></script>
    <script src="./resource/js/alpha.mo.ui.js"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<body style="overflow: hidden;"> 
	<audio id="audio_play" src="./resource/mouse.mp3"></audio>    
	<div class="dimmed_bgs" ></div>
    <div class="ags-wrap newui bag demos sound-btn">
        <h1 class="site-name">올윈에어</h1>        
		<div class="dimmed_bg" style="display: none;"></div>
        <header>
			<div class="ags-header">
				<a href="javascript:history.back();" class="btn_back">뒤로가기</a>
				<div class="ags-header-logo"></div>
			</div>	
			<div class="gnb_menu">
				<div class="finger_demo1" style="display: none;"></div>
                <div class="demo_gnb_menu1">
					<div></div>
					<div class="blue_text"><span style="visibility: hidden;"></span></div>
				</div>
				<div class="demo_gnb_menu2_2"></div> 
				<div class="demo_gnb_menu3">
					<div onclick="window.location.href='index_mrt10.html';">같이 앉는 좌석</div>						
					<div onclick="window.location.href='service_baggage.html';" class="black_text">수하물 할인</div>
				</div>
			</div>					
			<div class="select_boxbtn">
				<div class="select_backbtn active" flyInfo="1">
					<button id="ags-wrap-back" class="btn_back_c">
						<div class="boxbtn_flyb">
							<div class="de_ways2">ICN</div>
							<div class="de_ways3">-</div>
							<div class="de_ways4">EWR</div>
						</div>
					</button>
				</div>
				<div class="select_comebtn" flyInfo="2">
					<button id="ags-wrap" class="btn_come_c">
						<div class="boxbtn_flyb">				
							<div class="de_ways2">EWR</div>
							<div class="de_ways3">-</div>
							<div class="de_ways4">ICN</div>
						</div>
					</button>
				</div>
			</div>
		</header>
        <div class="header_txt1">
                <div>
                    <div class="header_txt2">공항보다,<br>수하물 비용을<br>아끼려면??</div>
                    <div class="header_txt_ai">
                            <img src="./resource/img/common/ai.png">
                            <div class="rolling_txt">
                                <ul>
                                    <li>공항보다 28% 할인예약하세요.</li>
                                    <li>공항 줄서는 시간도 아낄 수 있어요.</li>                                
                                    <li>아이 짐이 많다면...</li>
                                </ul>
                            </div>
                    </div>
                </div>
                <div class="header_img28">
                    <div class="header_img28num" id="counter0">28</div>
                </div>
		</div>
        <div class="contents separate200 bagnewui" id="con_slider">
            <div class="slider1" segIdx="1">
                <div class="bag_slider_box">                    
                    <div class="slider_box_line">
						<div class="demos_boxs active">
                            <div class="demos_boxs_tx1">JIYOUNG LEE</div>
                            <div class="demos_boxs_tx2">23KG <span>1</span>개</div>                            
                        </div>  
                        <div class="demos_boxs">
                            <div class="demos_boxs_tx1">SUNGJIN KIM</div>
                            <div class="demos_boxs_tx2">23KG <span>1</span>개</div>                            
                        </div> 
                        <div class="demos_boxs">
                            <div class="demos_boxs_tx1">JINYOUNG KIM</div>
                            <div class="demos_boxs_tx2">23KG <span>1</span>개</div>                            
                        </div>                                              
                    </div>
                </div>
                <div class="ap_bag_box1"> 
                    <div class="ap_bag_boxa">
                        <div class="ap_bag_boximg1"></div>
                        <div class="ap_bag_boximg1_1">
                            <div class="ap_bag_boxtxt1_1">무료 위탁 수하물</div>
                            <div class="ap_bag_boxtxt1_2">23 kg 1개 기본 제공</div>
                        </div>
                    </div>
                    <div class="ap_bag_boxb">
                        <div class="ap_bag_boximg2_0">
                            <div class="ap_bag_boximg2"></div>
                            <div class="ap_bag_boximg2_1">
                                <div class="ap_bag_boxtxt2_1">개수 추가</div>
                                <div class="ap_bag_boxtxt2_2">(23 kg /51 lbs)</div>
                                <div class="ap_bag_boxtxt2_3">KRW 160,000</div>
                            </div>
                        </div>
                        <div class="ap_bag_box_chka">
                            <div class="ap_bag_box_chka_1">-</div>
                            <div class="ap_bag_box_chka_2">0</div>
                            <div class="ap_bag_box_chka_3 active">+</div>
                        </div>
                    </div>                    
                </div>
                <div class="ap_bag_exp">
                    <div class="ap_bag_exp1">유의사항</div>
                </div>
                <div class="ap_bag_exptxt">
                    <div class="ap_bag_exptxt1"></div>
                    <div class="ap_bag_exptxt2">모든 탑승객에 적용하기</div>
                </div>
            </div>
            <div class="slider2" segIdx="2">
                <div class="bag_slider_box">                    
                    <div class="slider_box_line">
						<div class="demos_boxs active">
                            <div class="demos_boxs_tx1">JIYOUNG LEE</div>
                            <div class="demos_boxs_tx2">23KG <span>1</span>개</div>                            
                        </div>  
                        <div class="demos_boxs">
                            <div class="demos_boxs_tx1">JIYOUNG LEE</div>
                            <div class="demos_boxs_tx2">23KG <span>1</span>개</div>                            
                        </div> 
                        <div class="demos_boxs">
                            <div class="demos_boxs_tx1">JIYOUNG LEE</div>
                            <div class="demos_boxs_tx2">23KG <span>1</span>개</div>                            
                        </div>                                              
                    </div>
                </div>
                <div class="ap_bag_box1"> 
                    <div class="ap_bag_boxa">
                        <div class="ap_bag_boximg1"></div>
                        <div class="ap_bag_boximg1_1">
                            <div class="ap_bag_boxtxt1_1">무료 위탁 수하물</div>
                            <div class="ap_bag_boxtxt1_2">23 kg 1개 기본 제공</div>
                        </div>
                    </div>
                    <div class="ap_bag_boxb">
                        <div class="ap_bag_boximg2_0">
                            <div class="ap_bag_boximg2"></div>
                            <div class="ap_bag_boximg2_1">
                                <div class="ap_bag_boxtxt2_1">개수 추가</div>
                                <div class="ap_bag_boxtxt2_2">(23 kg /51 lbs)</div>
                                <div class="ap_bag_boxtxt2_3">KRW 160,000</div>
                            </div>
                        </div>
                        <div class="ap_bag_box_chka">
                            <div class="ap_bag_box_chka_1">-</div>
                            <div class="ap_bag_box_chka_2">0</div>
                            <div class="ap_bag_box_chka_3 active">+</div>
                        </div>
                    </div>                    
                </div>
                <div class="ap_bag_exp">
                    <div class="ap_bag_exp1">유의사항</div>
                </div>
                <div class="ap_bag_exptxt">
                    <div class="ap_bag_exptxt1"></div>
                    <div class="ap_bag_exptxt2">모든 탑승객에 적용하기</div>
                </div>
            </div>
        </div>
        
        <!----------------------------------------------->
		<div class="ags-summary ">	
			<h4 class="sr-only">부가서비스 결제금액</h4>	
			<div class="foot_align">
				<div class="btn_footer_open" style="pointer-events: none;"><span></span></div>
				
				<div class="btf_a">
					<div>
						<span>LEE JIYOUNG</span>님
						<span class="btf_a_people">3</span>인  
					</div>
					<div class="btf_a_txt"><span style="visibility: hidden;" data-savingAmount></span></div>
				</div>
				<div class="btf_bbtn" footerBtn="shift">
					<div>다음</div>
				</div>				
			</div>			
			<div class="footer_contents">				
				<a class="btn_footer_close">Close</a>
				<div class="pay_content">
					<div class="creditcard newui">
						<div class="card_warp">
							<div class="card_name">신청내역</div>
							<div class="card_name_btn">
								<div>
									항공권
								</div>
								<div>
									부가서비스
								</div>
							</div>
							<div class="credit_box_btn" agrBtn style="display: none;"></div>
						</div>
						<div agrLt class="credit_agree_box_content dis on" style="display: block;">
							<!-- 목적지,항공편명,로고,시간-->
							<div>
								<div class="card_boxfst">
									<div>
										<span>인천 ICN</span>→
										<span>나트랑 CXR</span>
									</div>
									<div class="air_logo jinair_w" style="display: none;"></div>
								</div>
								<div class="card_boxtwi">
									<div>10/01 09:15</div>
									<div>(단위 KRW)</div>
								</div>
							</div>
							<!-- 사람 -->				   
							<div class="bd_pxc">
								<div class="ccd_man1"></div>								
							</div>

                            <!-- 목적지,항공편명,로고,시간-->
							<div>
								<div class="card_boxfst">
									<div>
										<span>인천 ICN</span>→
										<span>나트랑 CXR</span>
									</div>
									<div class="air_logo jinair_w" style="display: none;"></div>
								</div>
								<div class="card_boxtwi">
									<div>10/01 09:15</div>
									<div>(단위 KRW)</div>
								</div>
							</div>
                            <div class="bd_pxc">
								<div class="ccd_man2"></div>								
							</div>
						</div>
					</div>
					
					<div class="credit_total_footer">
						<div class="credit_total">
							<div>부가서비스 총 결제 금액</div>
							<div class="credit_total_box3">								
								<div style="font-size: 16px; font-family: 'PretendardB';">KRW 589,000원</div>
                                <div style="color: #666; font-size: 11px; font-family: 'PretendardL';">KRW 105,000 절약</div>
							</div>   
						</div>
						<div class="payment_btn0">
							<div class="payment_btn1">바로결제</div>
							<div class="payment_btn2 btn_footer_closex">확인했어요</div>
						</div>
					</div>
				</div>
			</div>			
		</div>	
    <!----------------------------------------------->
        
    <!--버튼 1개 맨 밑-->
    <div class="pay_pay newui" style="display: none;">
        <button type="button" class="">결제하기</button>
    </div>
    <!--버튼 2개 맨 밑-->
    <div class="pay_pay newui" style="display: none;">
        <button type="button" class="pay_ment_btn1">건너띄기</button>
        <!--opnge 빼면 그레이색-->
        <button type="button" class="pay_ment_btn2 opnge">가는편 메뉴 선택</button>
    </div>

	<script>
		function play() {
			const audio = document.getElementById("audio_play");
			audio.pause();
			audio.currentTime = 0;
			audio.play();
		}

		document.addEventListener("click", function(e) {
			const soundBtn = e.target.closest(".sound-btn");
			if (soundBtn) {
				play();
			}
		});
	</script>
	
    <script>
	    String.prototype.comma = Number.prototype.comma = function() {
		    var n = String(this).replace(/\,/g,'');
		    return n.match(RegExp('^[0-9]{'+(n.length%3||3)+'}|[0-9]{3}','g'));
		}
	    
	    
	    document.addEventListener("DOMContentLoaded", () => {
	        const runCounter = () => {
	            let num = 1;
	            let counter = document.getElementById("counter0");
	            let interval = setInterval(() => {
	                counter.textContent = String(num).padStart(2, "0");
	                num++;
	                if (num > 28) {
	                    clearInterval(interval);
	                    setTimeout(runCounter, 3000); // 3초 후 다시 시작
	                }
	            }, 50);
	        };
	
	        runCounter();
	    });
	    
	    
	 	// 여정탭이동
		$(document).on("click", "#ags-wrap, #ags-wrap-back", function() {
			var segIdx		= $(this).parent().attr("flyInfo");

			// 다음버튼 css 초기화
			$("[footerBtn=shift]").removeClass("active");
			
			var curSegQty	=  $("[segIdx="+segIdx+"]").find(".bag_slider_name_box_2").get().reduce((acc,cur) => acc+Number($(cur).data("qty") || 0),0);
        	
        	if (curSegQty > 0) {
        		$("[footerBtn=shift]").addClass("active");
        	} else {
        		$("[footerBtn=shift]").removeClass("active");
        	}
		});
	 
	 	
	 	// 승객클릭
	 	$(document).on("click", ".demos_boxs", function() {
	 		var segIdx		= $(".select_boxbtn > div.active").attr("flyInfo");
	 		
	 		var paxBox		= $("[segIdx="+segIdx+"]").find(".slider_box_line");
			var currSclLeft	= $("[segIdx="+segIdx+"]").find(".slider_box_line").scrollLeft();

			var currPaxLeft	= $(this).position().left;
			var paddingLeft	= ($(window).width()-$(this).width()) / 2 - Number(paxBox.css("padding-left").replace("px",""));
			
			paxBox.get(0).scrollTo({left: (currSclLeft+currPaxLeft-paddingLeft+10), behavior: 'smooth'});
	 	});
	 	
	 	
	 	// 개수 추가(+)
	 	$(document).on("click", ".ap_bag_box_chka_3", function() {
	 		var segIdx		= $(".select_boxbtn > div.active").attr("flyInfo");
	 		
	 		var targetMinus	= $("[segIdx="+segIdx+"]").find(".ap_bag_box_chka_1");
	 		var targetQty	= $("[segIdx="+segIdx+"]").find(".ap_bag_box_chka_2");
	 		var targetPax	= $("[segIdx="+segIdx+"]").find(".demos_boxs.active");
	 		
	 		var currQty		= Number(targetQty.data("qty") || 0) + 1;
	 		var freeQty		= 1;
	 		var maxQty		= 2;
	 		
	 		if (currQty >= maxQty) {
	 			$(this).removeClass("active");
	 		}
	 		
	 		if (currQty > maxQty) {
	 			return;
	 		}
	 		
	 		targetMinus.addClass("active");
	 		targetQty.data("qty", currQty).text(currQty);
	 		targetPax.data("qty", currQty).find(".demos_boxs_tx2 span").text(freeQty+currQty);
	 		
	 		document.dispatchEvent(new CustomEvent("saved:update"));
	 	});
	 	
	 	
	 	// 개수 빼기(-)
	 	$(document).on("click", ".ap_bag_box_chka_1", function() {
	 		var segIdx		= $(".select_boxbtn > div.active").attr("flyInfo");
	 		
	 		var targetPlus	= $("[segIdx="+segIdx+"]").find(".ap_bag_box_chka_3");
	 		var targetQty	= $("[segIdx="+segIdx+"]").find(".ap_bag_box_chka_2");
	 		var targetPax	= $("[segIdx="+segIdx+"]").find(".demos_boxs.active");
	 		
	 		var currQty		= Number(targetQty.data("qty") || 0) - 1;
	 		var freeQty		= 1;
	 		var minQty		= 0;
	 		
	 		if (currQty <= minQty) {
	 			$(this).removeClass("active");
	 		}
	 		
	 		if (currQty < minQty) {
	 			return;
	 		}
	 		
	 		targetPlus.addClass("active");
	 		targetQty.data("qty", currQty).text(currQty);
	 		targetPax.data("qty", currQty).find(".demos_boxs_tx2 span").text(freeQty+currQty);
	 		
	 		document.dispatchEvent(new CustomEvent("saved:update"));
	 	});
	 	
	 	
		// 모든 탑승객에 적용하기
		$(document).on("click", ".ap_bag_exptxt2", function() {
			var segIdx		= $(".select_boxbtn > div.active").attr("flyInfo");
			
			var targetPaxLt	= $("[segIdx="+segIdx+"]").find(".demos_boxs");
			var targetQty	= $("[segIdx="+segIdx+"]").find(".ap_bag_box_chka_2");
			
			var currQty		= Number(targetQty.data("qty") || 0);
			var freeQty		= 1;
			
			targetPaxLt.data("qty", currQty).find(".demos_boxs_tx2 span").text(freeQty+currQty);
			
			document.dispatchEvent(new CustomEvent("saved:update"));
		});
		
		
		// 다음버튼 클릭
		$(document).on("click", "[footerBtn=shift]", function(e){
			var segIdx		= $(".select_boxbtn > div.active").attr("flyInfo");

			if (segIdx == 1) {
				$("#ags-wrap").trigger("click");
			} else {
				window.location.href = "index_mrt11.html";
			}
			
			e.stopPropagation();
		});
		
	    
		// 절약금액 변경
		document.addEventListener("saved:update", () => {
			var saving		= Number($(".foot_align .btf_a_txt > span").data("savingAmount") || 0);
			var savedQty	= $(".demos_boxs").get().reduce((acc,cur) => acc+Number($(cur).data("qty") || 0),0);
			var savedAmt	= savedQty*50000;
			
			$(".demo_gnb_menu1 .blue_text > span").text(savedAmt.comma()+" 절약");
			$(".foot_align .btf_a_txt > span").text("누적 KRW "+(saving+savedAmt).comma()+" 절약중");
			
			if (savedAmt > 0) {
				$(".demo_gnb_menu1 .blue_text > span").css("visibility","visible");
				$(".foot_align .btf_a_txt > span").css("visibility","visible");
			} else {
				$(".demo_gnb_menu1 .blue_text > span").css("visibility","hidden");
				$(".foot_align .btf_a_txt > span").css("visibility","hidden");
			}
		});
		
		
    </script>
    

</body>

</html>
